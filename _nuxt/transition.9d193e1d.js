import{o as X,N as oe,C as ue,c as se,n as de,H as Y,T as fe,l as p,t as ve,u as x,S as c,a as Q,p as pe}from"./dialog.92df28f8.js";import{e as Z,i as g,h as _,j as L,z as S,A as k,B as C,w as he,m as me,C as $,D as H}from"./entry.501d415a.js";function ce(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function O(e,...t){e&&t.length>0&&e.classList.add(...t)}function w(e,...t){e&&t.length>0&&e.classList.remove(...t)}var D=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(D||{});function ge(e,t){let r=X();if(!e)return r.dispose;let{transitionDuration:i,transitionDelay:o}=getComputedStyle(e),[n,l]=[i,o].map(a=>{let[s=0]=a.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,f)=>f-d);return s});return n!==0?r.setTimeout(()=>t("finished"),n+l):t("finished"),r.add(()=>t("cancelled")),r.dispose}function W(e,t,r,i,o,n){let l=X(),a=n!==void 0?ce(n):()=>{};return w(e,...o),O(e,...t,...r),l.nextFrame(()=>{w(e,...r),O(e,...i),l.add(ge(e,s=>(w(e,...i,...t),O(e,...o),a(s))))}),l.add(()=>w(e,...t,...r,...i,...o)),l.add(()=>a("cancelled")),l.dispose}function m(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let j=Symbol("TransitionContext");var be=(e=>(e.Visible="visible",e.Hidden="hidden",e))(be||{});function ye(){return $(j,null)!==null}function Se(){let e=$(j,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Ee(){let e=$(P,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let P=Symbol("NestingContext");function F(e){return"children"in e?F(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function q(e){let t=g([]),r=g(!1);S(()=>r.value=!0),k(()=>r.value=!1);function i(n,l=c.Hidden){let a=t.value.findIndex(({id:s})=>s===n);a!==-1&&(x(l,{[c.Unmount](){t.value.splice(a,1)},[c.Hidden](){t.value[a].state="hidden"}}),!F(t)&&r.value&&(e==null||e()))}function o(n){let l=t.value.find(({id:a})=>a===n);return l?l.state!=="visible"&&(l.state="visible"):t.value.push({id:n,state:"visible"}),()=>i(n,c.Unmount)}return{children:t,register:o,unregister:i}}let G=oe.RenderStrategy,Te=Z({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:r,slots:i,expose:o}){let n=g(0);function l(){n.value|=p.Opening,t("beforeEnter")}function a(){n.value&=~p.Opening,t("afterEnter")}function s(){n.value|=p.Closing,t("beforeLeave")}function d(){n.value&=~p.Closing,t("afterLeave")}if(!ye()&&ue())return()=>_(Le,{...e,onBeforeEnter:l,onAfterEnter:a,onBeforeLeave:s,onAfterLeave:d},i);let f=g(null),u=g("visible"),K=L(()=>e.unmount?c.Unmount:c.Hidden);o({el:f,$el:f});let{show:b,appear:M}=Se(),{register:R,unregister:B}=Ee(),U={value:!0},y=ve(),E={value:!1},N=q(()=>{!E.value&&u.value!=="hidden"&&(u.value="hidden",B(y),d())});S(()=>{let v=R(y);k(v)}),C(()=>{if(K.value===c.Hidden&&!!y){if(b&&u.value!=="visible"){u.value="visible";return}x(u.value,{hidden:()=>B(y),visible:()=>R(y)})}});let z=m(e.enter),I=m(e.enterFrom),ee=m(e.enterTo),V=m(e.entered),te=m(e.leave),ne=m(e.leaveFrom),le=m(e.leaveTo);S(()=>{C(()=>{if(u.value==="visible"){let v=Q(f);if(v instanceof Comment&&v.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function re(v){let A=U.value&&!M.value,h=Q(f);!h||!(h instanceof HTMLElement)||A||(E.value=!0,b.value&&l(),b.value||s(),v(b.value?W(h,z,I,ee,V,T=>{E.value=!1,T===D.Finished&&a()}):W(h,te,ne,le,V,T=>{E.value=!1,T===D.Finished&&(F(N)||(u.value="hidden",B(y),d()))})))}return S(()=>{he([b],(v,A,h)=>{re(h),U.value=!1},{immediate:!0})}),H(P,N),se(L(()=>x(u.value,{visible:p.Open,hidden:p.Closed})|n.value)),()=>{let{appear:v,show:A,enter:h,enterFrom:T,enterTo:Ce,entered:Fe,leave:Be,leaveFrom:Ae,leaveTo:Oe,...J}=e,ae={ref:f},ie={...J,...M&&b&&de.isServer?{class:me([J.class,...z,...I])}:{}};return Y({theirProps:ie,ourProps:ae,slot:{},slots:i,attrs:r,features:G,visible:u.value==="visible",name:"TransitionChild"})}}}),we=Te,Le=Z({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:r,slots:i}){let o=pe(),n=L(()=>e.show===null&&o!==null?(o.value&p.Open)===p.Open:e.show);C(()=>{if(![!0,!1].includes(n.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=g(n.value?"visible":"hidden"),a=q(()=>{l.value="hidden"}),s=g(!0),d={show:n,appear:L(()=>e.appear||!s.value)};return S(()=>{C(()=>{s.value=!1,n.value?l.value="visible":F(a)||(l.value="hidden")})}),H(P,a),H(j,d),()=>{let f=fe(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),u={unmount:e.unmount};return Y({ourProps:{...u,as:"template"},theirProps:{},slot:{},slots:{...i,default:()=>[_(we,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...r,...u,...f},i.default)]},attrs:{},features:G,visible:l.value==="visible",name:"Transition"})}}});export{Le as S,Te as h};
